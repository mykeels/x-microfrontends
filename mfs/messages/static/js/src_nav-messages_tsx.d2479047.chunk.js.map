{"version":3,"file":"static/js/src_nav-messages_tsx.d2479047.chunk.js","mappings":"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","sources":["nav-messages.tsx","../../microfrontends/src/index.ts","../../node_modules/.pnpm/tiny-invariant@1.3.1/node_modules/tiny-invariant/dist/esm/tiny-invariant.js","../../microfrontends/src/common/utils/assert.utils.ts","../../microfrontends/src/common/utils/errors.utils.ts","../../microfrontends/src/common/utils/sleep.utils.ts","../../microfrontends/src/common/utils/route.utils.ts","../../microfrontends/src/common/register/index.ts","../../microfrontends/src/components/ErrorBoundary/index.tsx","../../microfrontends/src/components/Microfrontend/index.tsx","../../microfrontends/src/components/Microfrontend/Microfrontend.service.ts","../../microfrontends/src/components/MicrofrontendSlot/index.tsx","../../microfrontends/src/contexts/index.tsx","../../microfrontends/src/components/MicrofrontendSlot/MicrofrontendSlot.utils.ts","../../microfrontends/src/components/MicrofrontendScreen/index.tsx","../../microfrontends/src/components/MicrofrontendScreen/MicrofrontendScreen.utils.ts"],"sourcesContent":["import { register } from \"microfrontends\";\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { createRoot } from \"react-dom/client\";\n\nimport pkg from \"../package.json\";\n\nconst getHTMLElement = (ref: HTMLElement | string) =>\n  ref instanceof HTMLElement ? ref : document.getElementById(ref);\n\nconst Button = () => (\n  <li className=\"flex flex-row self-start py-2 px-4 rounded-full tabs-item gap-4 outline outline-red-400\">\n    <svg className=\"msg-icon\" viewBox=\"0 0 24 24\" width=\"24\" fill=\"white\">\n      <path d=\"M1.998 5.5c0-1.381 1.119-2.5 2.5-2.5h15c1.381 0 2.5 1.119 2.5 2.5v13c0 1.381-1.119 2.5-2.5 2.5h-15c-1.381 0-2.5-1.119-2.5-2.5v-13zm2.5-.5c-.276 0-.5.224-.5.5v2.764l8 3.638 8-3.636V5.5c0-.276-.224-.5-.5-.5h-15zm15.5 5.463l-8 3.636-8-3.638V18.5c0 .276.224.5.5.5h15c.276 0 .5-.224.5-.5v-8.037z\"></path>\n    </svg>\n    <h1>Messages</h1>\n  </li>\n);\n\nexport default register(pkg.name, \"./nav-messages\", {\n  mount: (containerRef) => {\n    const container = getHTMLElement(containerRef);\n    if (container?.getAttribute(\"data-mf-mounted\") === \"true\") {\n      return () => {\n        ReactDOM.unmountComponentAtNode(container!);\n      };\n    }\n    container?.setAttribute(\"data-mf-mounted\", \"true\");\n    const root = createRoot(container!);\n    root.render(\n      <React.StrictMode>\n        <Button />\n      </React.StrictMode>\n    );\n\n    return () => {\n      root.unmount();\n    };\n  },\n  unmount: (containerRef) => {\n    ReactDOM.unmountComponentAtNode(getHTMLElement(containerRef)!);\n  },\n});\n","export * from \"./common\";\nexport * from \"./components\";\nexport * from \"./contexts\";\n","var isProduction = process.env.NODE_ENV === 'production';\nvar prefix = 'Invariant failed';\nfunction invariant(condition, message) {\n    if (condition) {\n        return;\n    }\n    if (isProduction) {\n        throw new Error(prefix);\n    }\n    var provided = typeof message === 'function' ? message() : message;\n    var value = provided ? \"\".concat(prefix, \": \").concat(provided) : prefix;\n    throw new Error(value);\n}\n\nexport { invariant as default };\n","import invariant from \"tiny-invariant\";\n\n/**\n * Asserts that the given condition is truthy, otherwise throws an error.\n */\nexport const assert = <TOptional>(\n  condition: TOptional,\n  message: string | (() => string)\n): NonNullable<TOptional> => {\n  invariant(\n    condition,\n    typeof message === \"string\"\n      ? `AssertError: ${message}`\n      : message || `AssertError: condition must be truthy`\n  );\n  const _condition = condition;\n  return _condition;\n};\n","/**\n *\n * Creates an error object with a name and a message.\n */\nexport const makeError = <TName extends string>(\n  name: TName,\n  message: string,\n  cause?: unknown\n) => ({\n  name,\n  message,\n  stack: new Error().stack,\n  cause,\n  toString: () => `${name}: ${message}`,\n});\n\n/**\n * Throws an error with the given name and message.\n */\nexport const throwError = <TName extends string>(\n  name: TName,\n  message: string\n) => {\n  throw makeError(name, message);\n};\n","export const sleep = (ms: number) => {\n  return new Promise((resolve) => {\n    setTimeout(resolve, ms);\n  });\n};\n","import { pathToRegexp } from \"path-to-regexp\";\n\n/**\n * Whether the given route can match the other route\n */\nexport const canMatchRoute = (route1: string, route2: string): boolean => {\n  const route1Regex = pathToRegexp(route1.replace(/\\/\\*+/g, \"/:params*\"), []);\n  const route2Regex = pathToRegexp(route2.replace(/\\/\\*+/g, \"/:params*\"), []);\n  return route1Regex.test(route2) || route2Regex.test(route1);\n};\n\n/**\n * Whether the given permission can match the other permission\n */\nexport const canMatchPermission = (\n  permission1: string,\n  permission2: string\n): boolean => {\n  const route1Regex = pathToRegexp(\n    permission1.replace(/\\/\\*\\*+/g, \"/:params*\").replace(/\\/\\*/g, \"/:params\"),\n    []\n  );\n  const route2Regex = pathToRegexp(\n    permission2.replace(/\\/\\*\\*+/g, \"/:params*\").replace(/\\/\\*/g, \"/:params\"),\n    []\n  );\n  return route1Regex.test(permission2) || route2Regex.test(permission1);\n};\n\n/**\n * Whether the given host can match the other host\n */\nexport const canMatchHost = (hostA?: string, hostB?: string): boolean => {\n  return !hostA || !hostB || hostA === hostB;\n};\n\ntype Permission = `${\"manage\" | \"read-only\"}:${string}`;\n\n/**\n * Whether the given user can match the given permissions\n */\nexport const canMatchPermissions = (\n  user: {\n    permissions: Permission[];\n  },\n  permissions: Permission[]\n): boolean => {\n  return permissions?.every((permission) => {\n    const [action, ...objectPaths] = permission.split(\":\");\n    const objectPath = objectPaths.join(\":\");\n    return user.permissions.some((p) => {\n      const [uAction, ...uObjectPaths] = p.split(\":\");\n      const uObjectPath = uObjectPaths.join(\":\");\n      const objectPathsMatching =\n        uObjectPath === objectPath ||\n        canMatchPermission(uObjectPath, objectPath);\n      const actionsMatching =\n        uAction === action || (action === \"read-only\" && uAction === \"manage\");\n      return objectPathsMatching && actionsMatching;\n    });\n  });\n};\n\nexport const selectProps =\n  <TKeys extends readonly string[]>(keys: TKeys) =>\n  <TObj extends { [key in TKeys[number]]: any }>(\n    obj: TObj\n  ): {\n    [key in TKeys[number]]: TObj extends Record<key, infer TValue>\n      ? TValue\n      : never;\n  } => {\n    return Object.fromEntries(\n      Object.entries(obj).filter(([key]: [any, any]) => keys.includes(key))\n    ) as Record<TKeys[number], any>;\n  };\n","import { assert, sleep } from \"../utils\";\nimport {\n  MicrofrontendController,\n  MountFn,\n  UnmountFn,\n} from \"../../components/Microfrontend/Microfrontend.types\";\n\nconst getWindow = () => {\n  const $window: Partial<Window> & { [key: string]: any } =\n    typeof window === \"undefined\" ? {} : window;\n  return $window;\n};\n\n/**\n *\n * @param {string} scope\n * @param {{ hasZeroInstances: () => boolean }} tracker\n */\nconst unloadMicrofrontendAssets = (\n  scope: string,\n  tracker: { hasZeroInstances: () => boolean }\n) => {\n  const mfName = `mf-${scope.toLocaleLowerCase()}-entry`;\n  const mfScript = document.getElementById(mfName);\n  if (!mfScript) {\n    return;\n  }\n  const src = assert(\n    mfScript.getAttribute(\"src\"),\n    `script #${mfName} must have attr [src]`\n  );\n  const lastSlash = src.lastIndexOf(\"/\");\n  const urlStart = src.slice(0, lastSlash);\n\n  const maxAttempts = 3;\n\n  async function attemptToRemoveAssets(attempt = 0): Promise<Element[]> {\n    const scripts = Array.from(document.querySelectorAll(\"head script\")).filter(\n      (script) => script.getAttribute(\"src\")?.startsWith(urlStart)\n    );\n    const links = Array.from(document.querySelectorAll(\"head link\")).filter(\n      (link) => link.getAttribute(\"href\")?.startsWith(urlStart)\n    );\n\n    if (links.length && tracker.hasZeroInstances()) {\n      console.log(\"Removed assets\", [...scripts, ...links]);\n      scripts.forEach((script) => {\n        script.remove();\n      });\n      links.forEach((link) => {\n        link.remove();\n      });\n      return [...scripts, ...links];\n    } else {\n      return sleep(100).then(() => {\n        if (attempt < maxAttempts) {\n          return attemptToRemoveAssets(attempt + 1);\n        }\n        return [];\n      });\n    }\n  }\n  return sleep(100).then(() => attemptToRemoveAssets());\n};\n\n/**\n * Keeps track of how many running instances of a Microfrontend there are.\n *\n * By tracking, we are able to unload the Microfrontend's assets when there are no more instances running.\n */\nconst instanceTracker = ($ctrl: MicrofrontendController) => {\n  return {\n    increment: () => {\n      $ctrl.instances++;\n    },\n    decrement: () => {\n      if ($ctrl.instances > 0) {\n        $ctrl.instances--;\n      }\n    },\n    hasZeroInstances: () => {\n      const $window = getWindow();\n      const scope = $window.$mfs?.[$ctrl.scope] as {\n        [key: string]: { instances: number };\n      };\n      return (\n        Object.values(\n          assert(scope, `window.$mfs.${$ctrl.scope} must exist`)\n        ).reduce((sum, scope) => sum + scope.instances, 0) === 0\n      );\n    },\n  };\n};\n\n/**\n * The Microfrontend Controller is the engine room for a Microfrontend.\n * It contains the `mount` and `unmount` functions, as well as other variables for managing the microfrontend.\n *\n * Usually, a Microfrontend's controller is located in `window.$mfs[scope][module]`\n *\n * If no controller exists for the scope<>module pair, then a new placeholder controller will be created in the appropriate location\n *\n */\nconst getMicrofrontendController = (\n  scope: string,\n  module: string\n): MicrofrontendController => {\n  if (typeof window === \"undefined\") {\n    console.warn(\n      \"Microfrontend cannot be registered without a global window scope\"\n    );\n    // @ts-ignore\n    return { mount: () => {}, unmount: () => {}, instances: 0 };\n  }\n  const $window = getWindow();\n  $window.$mfs = $window.$mfs || {};\n  $window.$mfs[scope] = $window.$mfs[scope] || {};\n  const $scope = $window.$mfs[scope];\n  if ($scope) {\n    $scope[module] = $scope[module] || {\n      mount: () => {\n        console.warn(`No ${scope} mount fn exists`);\n        return () => {};\n      },\n      unmount: () => console.warn(`No ${scope} unmount fn exists`),\n      instances: 0,\n      scope,\n      module,\n    };\n    return $scope?.[module]!;\n  }\n  console.warn(`No ${scope} scope exists in window.$mfs`);\n  return $scope?.[module]!;\n};\n\n/**\n * Registers a microfrontend's scope and module in the window, returning a controller\n */\nexport const register = (\n  scope: string,\n  module: string,\n  { mount, unmount }: { mount: MountFn; unmount: UnmountFn }\n): MicrofrontendController => {\n  const $ctrl = getMicrofrontendController(scope, module);\n  $ctrl.tracker = $ctrl.tracker || instanceTracker($ctrl);\n  const runUnmountFn = (unmount: () => () => void) => {\n    $ctrl.tracker?.decrement();\n    if ($ctrl.tracker?.hasZeroInstances()) {\n      unloadMicrofrontendAssets(scope, $ctrl.tracker);\n    }\n    return () => {\n      setTimeout(() => {\n        unmount()();\n      });\n    };\n  };\n  const getHTMLElement = (ref: HTMLElement | string) =>\n    ref instanceof HTMLElement ? ref : document.getElementById(ref);\n  $ctrl.mount = (containerRef, props) => {\n    $ctrl.tracker?.increment();\n    const unmount = assert(mount, \"mount fn must exist\")(containerRef, props);\n    const container = getHTMLElement(containerRef);\n    const eventBus = props?.eventBus;\n    eventBus?.emit(\"mf:mount\", {\n      container,\n      scope,\n      module,\n    });\n    return () => {\n      eventBus?.emit(\"mf:unmount\", {\n        container,\n        scope,\n        module,\n      });\n      return runUnmountFn(unmount);\n    };\n  };\n  $ctrl.unmount = (containerRef) => {\n    return runUnmountFn(() =>\n      assert(unmount, \"unmount fn must exist\")(containerRef)\n    );\n  };\n  return $ctrl;\n};\n","import React, { Component } from \"react\";\nimport { MicrofrontendErrorFallback } from \"./ErrorBoundary.types\";\n\ntype ErrorBoundaryState<TError> = {\n  error: TError | null;\n  errorInfo: any;\n};\n\ntype ErrorBoundaryProps<TProps, TError> = {\n  children: React.ReactNode;\n  Fallback: MicrofrontendErrorFallback<TProps, TError>;\n};\n\nexport class ErrorBoundary<\n  TError extends { message: string; cause?: any }\n> extends Component<\n  ErrorBoundaryProps<{}, TError>,\n  ErrorBoundaryState<TError>\n> {\n  constructor(props: ErrorBoundaryProps<{}, TError>) {\n    super(props);\n    this.state = { error: null, errorInfo: null };\n  }\n\n  componentDidCatch(error: Error & TError, errorInfo: any) {\n    // Catch errors in any components below and re-render with error message\n    this.setState({\n      error,\n      errorInfo: errorInfo,\n    });\n    // You can also log error messages to an error reporting service here\n  }\n\n  render() {\n    if (this.state.errorInfo && this.state.error) {\n      const error = this.state.error;\n      const cause = this.state.errorInfo;\n      if (error) {\n        error.cause = cause;\n      }\n      const Fallback = this.props.Fallback;\n      // Error path\n      return typeof Fallback === \"function\" ? (\n        <Fallback error={error} />\n      ) : (\n        Fallback\n      );\n    }\n    // Normally, just render children\n    return this.props.children;\n  }\n}\n","import classNames from \"classnames/dedupe\";\nimport React, { useEffect, useState } from \"react\";\nimport { useQuery } from \"react-query\";\n\nimport { makeError, assert } from \"../../common\";\nimport { loadMicrofrontend } from \"./Microfrontend.service\";\nimport { MicrofrontendErrorFallback } from \"../ErrorBoundary/ErrorBoundary.types\";\nimport { MicrofrontendManifest } from \"./Microfrontend.types\";\nimport { ErrorBoundary } from \"../ErrorBoundary\";\n\ntype MicrofrontendProps = {\n  scope: string;\n  module: string;\n  entry: string;\n  manifests: MicrofrontendManifest[];\n  url?: string;\n  id?: string;\n  className?: string | string[] | { [key: string]: boolean };\n  navigate?: (href: string) => any;\n  Loading: React.ComponentType;\n  Fallback: MicrofrontendErrorFallback;\n  loadMicrofrontend?: typeof loadMicrofrontend;\n};\n\nexport const Microfrontend = ({\n  id,\n  scope,\n  entry,\n  module,\n  Loading,\n  Fallback,\n  className,\n  loadMicrofrontend,\n  ...props\n}: MicrofrontendProps) => {\n  const {\n    isFetched: isMounted,\n    isError,\n    error,\n    data: { mount } = {},\n  } = useQuery(`microfrontend?entry=${entry}&module=${module}`, async () => {\n    assert(loadMicrofrontend, \"props.loadMicrofrontend must be a function\");\n    return loadMicrofrontend?.({ entry, scope, module });\n  });\n\n  const mfClassName = classNames(\n    \"microfrontend-container spin-when-empty\",\n    className\n  );\n\n  const containerId = `mount-${(id || scope).toLowerCase()}-container`;\n  const [mfError, setMFError] = useState<{ message: string } | null>(null);\n  const [retryCount, setRetryCount] = useState(0);\n\n  const ErrorFallback: MicrofrontendErrorFallback = (errorProps) =>\n    typeof Fallback === \"function\" ? (\n      <Fallback\n        {...{\n          containerId,\n          scope,\n          entry,\n          module,\n          ...props,\n        }}\n        {...errorProps}\n        retry={() => setRetryCount(retryCount + 1)}\n      />\n    ) : (\n      Fallback\n    );\n\n  const _ErrorBoundary = ({ children }: { children: React.ReactElement }) => (\n    <ErrorBoundary Fallback={ErrorFallback}>{children}</ErrorBoundary>\n  );\n\n  useEffect(() => {\n    if (!isMounted || isError || typeof mount !== \"function\") {\n      return;\n    }\n    let unmount: (() => void) | null = null;\n    try {\n      unmount = mount(containerId, {\n        ...props,\n        ErrorBoundary: _ErrorBoundary,\n      });\n    } catch (error) {\n      setMFError(\n        makeError(\n          \"MountError\",\n          `Could not mount Microfrontend: ${scope} (${module})`,\n          error\n        )\n      );\n    }\n    return () => {\n      setTimeout(() => {\n        try {\n          if (typeof unmount === \"function\") {\n            console.log(\"unmount\", scope);\n            unmount();\n          }\n        } catch (err) {\n          console.error(err);\n          setMFError(\n            makeError(\n              \"UnmountError\",\n              `Could not unmount Microfrontend: ${scope} (${module})`,\n              error\n            )\n          );\n        }\n      });\n    };\n  }, [isMounted, isError, entry, module, retryCount]);\n\n  return isError ? (\n    <ErrorFallback\n      error={\n        error instanceof Error\n          ? error\n          : makeError(\n              \"UnknownError\",\n              typeof error === \"string\"\n                ? error\n                : `An error occurred in a microfrontend: ${error}`,\n              error\n            )\n      }\n    />\n  ) : mfError ? (\n    <ErrorFallback error={mfError} />\n  ) : !isMounted ? (\n    typeof Loading === \"function\" ? (\n      <Loading />\n    ) : (\n      Loading\n    )\n  ) : (\n    <div\n      id={containerId}\n      className={mfClassName}\n      {...{ \"data-mf-scope\": scope, \"data-mf-module\": module }}\n    ></div>\n  );\n};\n\nMicrofrontend.defaultProps = {\n  loadMicrofrontend,\n};\n\nexport * from \"./Microfrontend.types\";\n","import { assert, sleep } from \"../../common\";\nimport {\n  MicrofrontendManifest,\n  MicrofrontendDefaultExport,\n} from \"./Microfrontend.types\";\n\ndeclare function __webpack_init_sharing__(scope: string): Promise<void>;\ndeclare const __webpack_share_scopes__: { default: any };\n\nexport function loadComponent<TScope extends string>(\n  scope: TScope,\n  module: string\n): () => Promise<MicrofrontendDefaultExport> {\n  return async () => {\n    if (typeof window === \"undefined\") {\n      return;\n    }\n    const $window = window as {\n      [key in TScope]: {\n        init: (webpackShareScope: any) => Promise<any>;\n        get: (module: string) => Promise<{ [key: string]: any }>;\n      };\n    };\n    // Initializes the share scope. This fills it with known provided modules from this build and all remotes\n    await __webpack_init_sharing__(\"default\");\n\n    const container = $window[scope];\n    // Initialize the container, it may provide shared modules\n    await container.init(__webpack_share_scopes__.default);\n    const factory = await Promise.race([\n      container?.get(module),\n      sleep(300).then(() =>\n        Promise.reject(\n          new Error(\n            `No module ${module} was found in window.${scope} container`\n          )\n        )\n      ),\n    ]);\n    const Module =\n      typeof factory === \"function\"\n        ? factory()\n        : Promise.reject(\n            new Error(\n              `No module ${module} was found in window.${scope} container`\n            )\n          );\n    return Module;\n  };\n}\n\nexport const loadScript = (\n  id: string,\n  src: string\n): Promise<HTMLScriptElement> => {\n  return new Promise((resolve, reject) => {\n    if (document.querySelector(`script[id=\"${id}\"]`)) {\n      const script: HTMLScriptElement = assert(\n        document.querySelector(`script[id=\"${id}\"]`),\n        `script must exist: [id=${id}]`\n      );\n      return resolve(script);\n    }\n    const script = document.createElement(\"script\");\n    script.id = id;\n    script.src = src;\n    script.type = \"text/javascript\";\n    script.async = true;\n    script.onload = () => resolve(script);\n    script.onerror = reject;\n    document.head.appendChild(script);\n  });\n};\n\nexport const loadMicrofrontend = async ({\n  entry,\n  scope,\n  module,\n}: Pick<MicrofrontendManifest, \"entry\" | \"scope\" | \"module\">) =>\n  loadScript(`mf-${scope.toLowerCase()}-entry`, entry)\n    .then(() => loadComponent(scope, module)())\n    .then((exported) => exported.default)\n    .then(({ mount, unmount }) => {\n      return {\n        mount,\n        unmount,\n      };\n    })\n    .catch((error: unknown) => Promise.reject(error));\n","import React, { useContext, useId } from \"react\";\nimport { ErrorBoundary } from \"../ErrorBoundary\";\nimport { MicrofrontendContext } from \"../../contexts\";\nimport { Microfrontend } from \"../Microfrontend\";\nimport { getMicrofrontendsByName } from \"./MicrofrontendSlot.utils\";\nimport { MicrofrontendCustomSlotOptions } from \"../Microfrontend/Microfrontend.types\";\n\ntype MicrofrontendSlot = MicrofrontendCustomSlotOptions & {\n  [key: string]: any;\n};\n\ntype MicrofrontendSlotProps = {\n  name: string;\n  transform?: (slots: MicrofrontendSlot[]) => MicrofrontendSlot[];\n  Fallback?: React.ComponentType<{ slot?: MicrofrontendSlot }>;\n  Loading?: React.ComponentType<{ slot?: MicrofrontendSlot }>;\n  className?: string | string[] | { [key: string]: boolean };\n};\n\nexport const MicrofrontendSlot = ({\n  name,\n  transform,\n  Fallback,\n  Loading,\n  className,\n  ...props\n}: MicrofrontendSlotProps) => {\n  const id = useId();\n  const { manifests, user, ...contextProps } = useContext(MicrofrontendContext);\n\n  const slots = getMicrofrontendsByName(manifests, name, {\n    user,\n  });\n\n  // @ts-ignore\n  const transformedSlots = transform(slots);\n\n  return (\n    <>\n      {transformedSlots.map((slot, index) => (\n        <ErrorBoundary\n          key={`slot-${slot.scope}-${slot.module}-${id}-${index}`}\n          Fallback={\n            typeof Fallback === \"function\"\n              ? (errorProps) => (\n                  <Fallback slot={slot} {...props} {...errorProps} />\n                )\n              : Fallback || (() => <></>)\n          }\n        >\n          <Microfrontend\n            {...{ manifests, user, ...slot, ...contextProps, ...props }}\n            Fallback={\n              typeof Fallback === \"function\"\n                ? (errorProps) => (\n                    <Fallback slot={slot} {...props} {...errorProps} />\n                  )\n                : Fallback || (() => <></>)\n            }\n            Loading={\n              typeof Loading === \"function\"\n                ? () => <Loading slot={slot} />\n                : Loading || (() => <></>)\n            }\n            entry={slot.entry}\n            module={slot.module}\n            scope={slot.scope}\n            className={className}\n            id={`slot-${slot.scope}-${id}-${index}`}\n          />\n        </ErrorBoundary>\n      ))}\n    </>\n  );\n};\n\nMicrofrontendSlot.defaultProps = {\n  transform: (slots) => slots,\n  Fallback: () => <div>Sorry, there was an error loading this component</div>,\n  Loading: () => <div>...loading...</div>,\n} satisfies Partial<MicrofrontendSlotProps>;\n\nexport * from \"./MicrofrontendSlot.utils\";\n","import React from \"react\";\n\nimport { ErrorBoundary, MicrofrontendMountProps } from \"../components\";\n\nconst defaults = {\n  homedir: \"/\",\n\n  navigate: () => {},\n\n  manifests: [],\n\n  fetch: (input: RequestInfo, init?: RequestInit) => window.fetch(input, init),\n\n  user: undefined,\n\n  eventBus: undefined,\n\n  layout: {\n    navItems: [],\n    logout: () => {},\n  },\n\n  ErrorBoundary: ({ children }: { children: React.ReactElement }) => (\n    <ErrorBoundary Fallback={() => <>An Error occurred</>}>\n      {children}\n    </ErrorBoundary>\n  ),\n};\n\nexport const MicrofrontendContext =\n  React.createContext<MicrofrontendMountProps>(defaults);\n","import {\n  assert,\n  canMatchHost,\n  canMatchPermissions,\n  selectProps,\n} from \"../../common\";\nimport {\n  MicrofrontendCustomSlotOptions,\n  MicrofrontendManifest,\n  MicrofrontendPermission,\n} from \"../Microfrontend/Microfrontend.types\";\n\ntype MicrofrontendMatchingName = {\n  module: string;\n  entry: string;\n  scope: string;\n  [key: string]: any;\n};\n\n/**\n *\n * @param manifests\n * @param name\n * @param options\n * @param options.transformPermission Use this to replace keywords in permissions such as :companyAccountId or :userId\n * @returns Slots matching the given name\n */\nexport const getMicrofrontendsByName = (\n  manifests: MicrofrontendManifest[],\n  name: string,\n  options?: {\n    host?: string;\n    user?: { permissions: MicrofrontendPermission[] };\n    transformPermission?: (\n      permission: MicrofrontendPermission\n    ) => MicrofrontendPermission;\n  }\n): MicrofrontendMatchingName[] =>\n  manifests\n    ?.reduce(\n      (arr, manifest) =>\n        [\n          ...arr,\n          ...(manifest.slots[name]?.map((slot) => ({\n            ...selectProps([\"entry\", \"scope\", \"module\", \"auth\"])(manifest),\n            ...(typeof slot === \"string\" ? { slot } : slot),\n          })) || []),\n        ] as MicrofrontendMatchingName[],\n      [] as MicrofrontendMatchingName[]\n    )\n    .filter(({ host: routeHost }: MicrofrontendCustomSlotOptions) =>\n      canMatchHost(routeHost, options?.host)\n    )\n    .filter(\n      ({ auth }: MicrofrontendCustomSlotOptions) =>\n        !auth?.required ||\n        canMatchPermissions(\n          assert(options?.user, \"options.user must exist\"),\n          auth?.permissions?.map((p) =>\n            typeof options?.transformPermission === \"function\"\n              ? options?.transformPermission(p)\n              : p\n          ) || []\n        )\n    );\n","import React from \"react\";\nimport { useQuery } from \"react-query\";\nimport { useLocation } from \"react-router-dom\";\nimport { makeError } from \"../../common\";\n\nimport { Microfrontend } from \"../Microfrontend\";\nimport { getMicrofrontendsMatchingLocation } from \"./MicrofrontendScreen.utils\";\nimport {\n  MicrofrontendManifest,\n  MicrofrontendMountProps,\n} from \"../Microfrontend/Microfrontend.types\";\nimport { MicrofrontendErrorFallback } from \"../ErrorBoundary/ErrorBoundary.types\";\n\ntype MicrofrontendScreenProps = {\n  host?: string;\n  Loading: React.ComponentType;\n  Fallback: MicrofrontendErrorFallback;\n  Microfrontend: typeof Microfrontend;\n} & Omit<MicrofrontendMountProps, \"manifests\" | \"ErrorBoundary\"> &\n  (\n    | {\n        getMicrofrontendManifests: () => Promise<MicrofrontendManifest[]>;\n      }\n    | {\n        manifests: MicrofrontendManifest[];\n      }\n  );\n\n/**\n * Route-level component, that loads Microfrontends based on\n * whether their manifest routes matches the current location.\n */\nexport const MicrofrontendScreen = ({\n  host,\n  Loading,\n  Fallback,\n  navigate,\n  Microfrontend,\n  ...props\n}: MicrofrontendScreenProps) => {\n  const location = useLocation();\n  const url = location.pathname;\n  const {\n    data: manifests = \"manifests\" in props ? props.manifests : [],\n    isLoading,\n    isError,\n    error,\n  } = useQuery(\n    \"manifests\",\n    () =>\n      \"getMicrofrontendManifests\" in props\n        ? props.getMicrofrontendManifests()\n        : props.manifests,\n    {\n      enabled: \"getMicrofrontendManifests\" in props,\n    }\n  );\n  const [targetMF] =\n    getMicrofrontendsMatchingLocation(manifests || [], url, {\n      host,\n      user: props?.user,\n    }) || [];\n\n  const ErrorFallback = (errorProps: { error: any }) =>\n    typeof Fallback === \"function\" ? (\n      <Fallback {...props} {...errorProps} />\n    ) : (\n      Fallback\n    );\n\n  return isError ? (\n    <ErrorFallback\n      error={\n        error instanceof Error\n          ? error\n          : makeError(\n              \"UnknownError\",\n              typeof error === \"string\"\n                ? error\n                : `An error occurred in a microfrontend: ${error}`,\n              error\n            )\n      }\n    />\n  ) : isLoading ? (\n    typeof Loading === \"function\" ? (\n      <Loading />\n    ) : (\n      Loading\n    )\n  ) : !targetMF && manifests?.length ? (\n    <ErrorFallback\n      error={makeError(\n        \"NoRouteMatchFound\",\n        `No microfrontend was found capable of handling the route: ${url}`\n      )}\n    />\n  ) : targetMF ? (\n    <Microfrontend\n      {...props}\n      url={url}\n      entry={targetMF.entry}\n      scope={targetMF.scope}\n      module={targetMF.module}\n      manifests={manifests}\n      navigate={navigate}\n      Loading={Loading}\n      Fallback={Fallback}\n    />\n  ) : null;\n};\n\nMicrofrontendScreen.defaultProps = {\n  Microfrontend,\n};\n\nexport * from \"./MicrofrontendScreen.utils\";\n","import {\n  assert,\n  canMatchHost,\n  canMatchPermissions,\n  canMatchRoute,\n  selectProps,\n} from \"../../common\";\nimport {\n  MicrofrontendManifest,\n  MicrofrontendPermission,\n  MicrofrontendRouteOptions,\n} from \"../Microfrontend/Microfrontend.types\";\n\ntype MicrofrontendMatchingRoute = {\n  entry: string;\n  scope: string;\n  module: string;\n  route: string;\n  host?: string;\n};\n\n/**\n *\n * @param manifests\n * @param url\n * @param options\n * @param options.transformPermission Use this to replace keywords in permissions such as :companyAccountId or :userId\n * @returns slots matching the current location url\n */\nexport const getMicrofrontendsMatchingLocation = (\n  manifests: MicrofrontendManifest[],\n  url: string,\n  options: {\n    host?: string;\n    user?: { permissions: MicrofrontendPermission[] };\n    transformPermission?: (\n      permission: MicrofrontendPermission\n    ) => MicrofrontendPermission;\n  }\n): MicrofrontendMatchingRoute[] =>\n  manifests\n    ?.reduce(\n      (arr, manifest) =>\n        [\n          ...arr,\n          ...(manifest.slots.routes?.map((route) => ({\n            ...selectProps([\"entry\", \"scope\", \"module\", \"auth\"])(manifest),\n            ...(typeof route === \"string\" ? { route } : route),\n          })) || []),\n        ] as MicrofrontendMatchingRoute[],\n      [] as MicrofrontendMatchingRoute[]\n    )\n    .filter(\n      ({ route, host: routeHost }: MicrofrontendRouteOptions) =>\n        canMatchRoute(route, url) && canMatchHost(routeHost, options?.host)\n    )\n    .filter(\n      ({ auth }: MicrofrontendRouteOptions) =>\n        !auth?.required ||\n        canMatchPermissions(\n          assert(options?.user, \"options.user must exist\"),\n          auth?.permissions?.map(\n            typeof options?.transformPermission === \"function\"\n              ? options?.transformPermission\n              : (p) => p\n          ) || []\n        )\n    );\n"],"names":["getHTMLElement","ref","HTMLElement","document","getElementById","Button","_jsxs","className","children","_jsx","viewBox","width","fill","d","register","mount","containerRef","container","getAttribute","ReactDOM","setAttribute","root","createRoot","render","React","unmount","src_exports","__export","ErrorBoundary","Microfrontend","MicrofrontendContext","MicrofrontendScreen","MicrofrontendSlot","assert","canMatchHost","canMatchPermission","canMatchPermissions","canMatchRoute","getMicrofrontendsByName","getMicrofrontendsMatchingLocation","makeError","selectProps","sleep","throwError","module","exports","prefix","condition","message","Error","invariant","concat","name","cause","stack","toString","ms","Promise","resolve","setTimeout","import_path_to_regexp","require","route1","route2","route1Regex","pathToRegexp","replace","route2Regex","test","permission1","permission2","hostA","hostB","user","permissions","every","permission","_permission$split","split","_permission$split2","_toArray","action","objectPath","slice","join","some","p","_p$split","_p$split2","uAction","uObjectPath","keys","obj","Object","fromEntries","entries","filter","_ref","key","_slicedToArray","includes","getWindow","window","scope","module2","_ref3","$ctrl","console","warn","instances","$window","$mfs","$scope","getMicrofrontendController","tracker","increment","decrement","hasZeroInstances","_$window$$mfs","values","reduce","sum","scope2","instanceTracker","runUnmountFn","unmount2","_$ctrl$tracker","_$ctrl$tracker2","mfName","toLocaleLowerCase","mfScript","src","lastSlash","lastIndexOf","urlStart","maxAttempts","then","attemptToRemoveAssets","_attemptToRemoveAssets","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","attempt","scripts","links","_args","wrap","_context","prev","next","length","undefined","Array","from","querySelectorAll","script","_script$getAttribute","startsWith","link","_link$getAttribute","log","_toConsumableArray","forEach","remove","abrupt","stop","unloadMicrofrontendAssets","props","_$ctrl$tracker3","eventBus","emit","import_react","__toESM","_import_react$Compone","_inherits","_ErrorBoundary2","_super","_createSuper","_this","_classCallCheck","call","state","error","errorInfo","_createClass","value","this","setState","Fallback","default","createElement","Component","import_dedupe","import_react2","import_react_query","loadComponent","_callee2","factory","Module","_context2","__webpack_init_sharing__","init","__webpack_share_scopes__","race","get","reject","sent","loadScript","id","querySelector","script2","type","async","onload","onerror","head","appendChild","loadMicrofrontend","_ref6","_callee3","_ref5","entry","_context3","toLowerCase","exported","_ref7","catch","_x","_ref8","Loading","loadMicrofrontend2","_objectWithoutProperties","_excluded","_ref9","useQuery","_callee4","_context4","isMounted","isFetched","isError","_ref9$data","data","mfClassName","containerId","_ref11","useState","_ref12","mfError","setMFError","_ref13","_ref14","retryCount","setRetryCount","ErrorFallback","errorProps","_objectSpread","retry","_ErrorBoundary","_ref15","useEffect","error2","err","defaultProps","import_react4","import_react3","defaults","homedir","navigate","manifests","fetch","input","layout","navItems","logout","_ref16","Fragment","createContext","options","arr","manifest","_manifest$slots$name","slots","map","slot","_ref17","routeHost","host","_ref18","_auth$permissions","auth","required","transformPermission","_ref19","transform","_excluded2","useId","_ref20","useContext","contextProps","_excluded3","transformedSlots","index","import_react5","import_react_query2","import_react_router_dom","url","_manifest$slots$route","routes","route","_ref21","_ref22","_auth$permissions2","_ref23","Microfrontend2","_excluded4","useLocation","pathname","_ref24","getMicrofrontendManifests","enabled","_ref24$data","isLoading","_ref25","targetMF"],"sourceRoot":""}